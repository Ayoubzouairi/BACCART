<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8" />
  <title>BACCARAT</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    body {
      background-color: #1c1c1c;
      color: gold;
      font-family: 'Segoe UI', Tahoma, sans-serif;
      padding: 2em;
      direction: rtl;
      text-align: center;
    }
    h1 {
      font-size: 2.5em;
      color: gold;
    }
    input, select {
      padding: 0.8em;
      font-size: 1em;
      margin: 0.5em;
      width: 80%;
      border-radius: 6px;
      border: none;
    }
    button {
      padding: 0.8em 2em;
      font-size: 1em;
      background-color: gold;
      color: #1c1c1c;
      border: none;
      border-radius: 6px;
      margin-top: 1em;
      cursor: pointer;
    }
    .result, .stats {
      margin-top: 1.5em;
      font-size: 1.2em;
    }
  </style>
</head>
<body>
  <h1>BACCARAT</h1>
  <p>📊 أدخل نتائج آخر 5 جولات (P=Player, B=Banker, T=Tie)</p>
  <input type="text" id="roundsInput" placeholder="مثال: B,P,B,T,B" />
  <br />
  <select id="langSelect">
    <option value="ar-MA">🇲🇦 العربية</option>
    <option value="en-US">🇺🇸 English</option>
  </select>
  <br />
  <button onclick="predict()">🔮 توقع الجولة القادمة</button>
  <div class="result" id="predictionResult"></div>
  <div class="stats" id="statsResult"></div>

  <script>
    function speak(text, lang) {
      const utter = new SpeechSynthesisUtterance(text);
      utter.lang = lang;
      speechSynthesis.speak(utter);
    }

    function predict() {
      const input = document.getElementById('roundsInput').value.trim().toUpperCase();
      const rounds = input.split(',').map(x => x.trim());
      const lang = document.getElementById('langSelect').value;
      const count = { P: 0, B: 0, T: 0 };

      rounds.forEach(r => {
        if (count[r] !== undefined) count[r]++;
      });

      const total = rounds.length;
      const percent = {
        P: ((count.P / total) * 100).toFixed(1),
        B: ((count.B / total) * 100).toFixed(1),
        T: ((count.T / total) * 100).toFixed(1)
      };

      let winner = 'P';
      if (count.B >= count.P && count.B >= count.T) winner = 'B';
      else if (count.T > count.P && count.T > count.B) winner = 'T';

      const labels = {
        ar: { P: 'اللاعب', B: 'المصرفي', T: 'تعادل' },
        en: { P: 'Player', B: 'Banker', T: 'Tie' }
      };

      const label = lang === 'ar-MA' ? labels.ar[winner] : labels.en[winner];
      const speechText = lang === 'ar-MA'
        ? `توقع الجولة القادمة: ${label} بنسبة ${percent[winner]} بالمئة`
        : `Next round prediction: ${label} with ${percent[winner]} percent`;

      document.getElementById('predictionResult').innerText = speechText;
      document.getElementById('statsResult').innerText = 
        `Player: ${percent.P}% | Banker: ${percent.B}% | Tie: ${percent.T}%`;

      speak(speechText, lang);
    }
  </script>
</body>
    </html>
