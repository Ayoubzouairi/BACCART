<!doctype html>
<html lang="ar">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>AYOUB BACCARAT ULTIMATE - Ù…Ø­Ù„Ù„ Ù…ØªÙƒØ§Ù…Ù„</title>
<style>
/* Ø£Ù†Ù…Ø§Ø· Ø¥Ø¶Ø§ÙÙŠØ© Ù„Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ù…ØªÙƒØ§Ù…Ù„ */
.advanced-analysis { background: rgba(212,175,55,0.1); padding: 12px; border-radius: 8px; margin: 10px 0; }
.pattern-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 8px; margin-top: 10px; }
.pattern-item { background: rgba(255,255,255,0.05); padding: 8px; border-radius: 6px; text-align: center; }
.pattern-value { font-weight: bold; color: var(--gold); font-size: 16px; }
.pattern-label { font-size: 11px; color: var(--muted); }
.comprehensive-stats { display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px; margin-top: 10px; }
.stat-card { background: linear-gradient(135deg, rgba(255,255,255,0.05), transparent); padding: 10px; border-radius: 8px; text-align: center; }
.stat-number { font-size: 18px; font-weight: 800; color: var(--gold); }
.stat-desc { font-size: 11px; color: var(--muted); }
.trend-indicator { display: inline-block; padding: 2px 6px; border-radius: 4px; font-size: 10px; margin-left: 5px; }
.trend-up { background: rgba(56,176,0,0.3); color: #38b000; }
.trend-down { background: rgba(255,0,110,0.3); color: #ff006e; }
.real-time-detection { border-left: 3px solid var(--gold); padding-left: 10px; margin: 8px 0; }
.detection-item { display: flex; justify-content: space-between; margin: 4px 0; }
</style>
</head>
<body>
<div class="app">
<header class="top card">
  <div class="brand">
    <div class="logo">AYOUB BACCARAT ULTIMATE</div>
    <div class="subtitle">Ù…Ø­Ù„Ù„ Ù…ØªÙƒØ§Ù…Ù„ + Ù‚Ø§Ø±Ø¦ ØªÙ„Ù‚Ø§Ø¦ÙŠ Ù„ÙƒÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ğŸ°ğŸ“Š</div>
  </div>
  <div class="controls">
    <button id="themeToggle" class="theme-toggle">ğŸŒš</button>
    <button id="btnReset" class="btn gold">Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ†</button>
  </div>
</header>

<main class="card layout">
<aside class="left">
  <!-- Ù†Ø¸Ø§Ù… Ø§Ù„Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„Ù…ØªÙƒØ§Ù…Ù„Ø© -->
  <div class="panel card">
    <div class="section-title">ğŸ“· Ù‚Ø§Ø±Ø¦ 1xbet Ø§Ù„Ù…ØªÙƒØ§Ù…Ù„</div>
    
    <div class="row">
      <button id="btnStartAdvanced" class="btn gold">ØªØ´ØºÙŠÙ„ Ø§Ù„Ù…Ø³Ø­ Ø§Ù„Ù…ØªÙ‚Ø¯Ù…</button>
      <button id="btnStopAdvanced" class="btn" style="background:#666">Ø¥ÙŠÙ‚Ø§Ù</button>
    </div>
    
    <div class="camera-container">
      <video id="advancedCameraView" class="camera-view" autoplay playsinline></video>
      <div id="advancedScanOverlay" class="scan-overlay" style="display:none"></div>
    </div>
    
    <div id="advancedStatus" class="camera-status">
      ğŸ”´ Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ù…ØªÙ‚Ø¯Ù… ØºÙŠØ± Ù†Ø´Ø·
    </div>

    <!-- Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ù…Ù‚Ø±Ø¤Ø© ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ -->
    <div id="advancedResults" class="ocr-results" style="display:none">
      <div style="font-weight:bold; text-align:center; margin-bottom:8px;">ğŸ¯ Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ù…Ù‚Ø±Ø¤Ø©</div>
      
      <div class="real-time-detection">
        <div class="detection-item">
          <span>Ù„Ø§Ø¹Ø¨ (PLAYER):</span>
          <span id="detectedPlayerScore" class="ocr-value">-</span>
        </div>
        <div class="detection-item">
          <span>Ù…ØµØ±ÙÙŠ (BANKER):</span>
          <span id="detectedBankerScore" class="ocr-value">-</span>
        </div>
        <div class="detection-item">
          <span>PLAYER PAIR:</span>
          <span id="detectedPlayerPair" class="ocr-value">-</span>
        </div>
        <div class="detection-item">
          <span>BANKER PAIR:</span>
          <span id="detectedBankerPair" class="ocr-value">-</span>
        </div>
        <div class="detection-item" style="border-top:1px solid rgba(255,255,255,0.1); padding-top:4px;">
          <span><strong>Ø§Ù„ÙØ§Ø¦Ø²:</strong></span>
          <span id="detectedFinalWinner" class="ocr-value" style="color:var(--gold)">-</span>
        </div>
      </div>
    </div>

    <!-- Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ù…Ø³Ø­ -->
    <div class="comprehensive-stats">
      <div class="stat-card">
        <div class="stat-number" id="totalDetections">0</div>
        <div class="stat-desc">Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø³ÙˆØ­</div>
      </div>
      <div class="stat-card">
        <div class="stat-number" id="detectionAccuracy">0%</div>
        <div class="stat-desc">Ø¯Ù‚Ø© Ø§Ù„Ù‚Ø±Ø§Ø¡Ø©</div>
      </div>
    </div>
  </div>

  <!-- Ø§Ù„ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ù…ØªÙ‚Ø¯Ù… -->
  <div class="panel card advanced-analysis">
    <div class="section-title">ğŸ“Š Ø§Ù„ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ù…ØªÙ‚Ø¯Ù…</div>
    
    <div class="pattern-grid">
      <div class="pattern-item">
        <div class="pattern-value" id="patternPlayer">0%</div>
        <div class="pattern-label">Ù„Ø§Ø¹Ø¨</div>
      </div>
      <div class="pattern-item">
        <div class="pattern-value" id="patternBanker">0%</div>
        <div class="pattern-label">Ù…ØµØ±ÙÙŠ</div>
      </div>
      <div class="pattern-item">
        <div class="pattern-value" id="patternTie">0%</div>
        <div class="pattern-label">ØªØ¹Ø§Ø¯Ù„</div>
      </div>
    </div>

    <div style="margin-top:10px; font-size:12px;">
      <div class="detection-item">
        <span>Ø£Ø·ÙˆÙ„ Ø³Ù„Ø³Ù„Ø© Ù„Ø§Ø¹Ø¨:</span>
        <span id="longestPlayerStreak" class="ocr-value">0</span>
      </div>
      <div class="detection-item">
        <span>Ø£Ø·ÙˆÙ„ Ø³Ù„Ø³Ù„Ø© Ù…ØµØ±ÙÙŠ:</span>
        <span id="longestBankerStreak" class="ocr-value">0</span>
      </div>
      <div class="detection-item">
        <span>Ø§Ù„ØªÙ†Ø§ÙˆØ¨ Ø§Ù„Ø­Ø§Ù„ÙŠ:</span>
        <span id="currentAlternation" class="ocr-value">0</span>
      </div>
    </div>
  </div>

  <!-- Ø¨Ø§Ù‚ÙŠ Ø§Ù„Ø¨Ø§Ù†Ù„Ø§Øª -->
  <div class="panel card">
    <div class="section-title">âš¡ Ø§Ù„Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø³Ø±ÙŠØ¹</div>
    <textarea id="quickInput" class="quick-input" placeholder="P,B,T,P,B,B,T Ø£Ùˆ Player,Banker,Tie"></textarea>
    <button class="btn gold" onclick="processAdvancedInput()" style="margin-top:8px; width:100%">Ù…Ø¹Ø§Ù„Ø¬Ø© Ù…ØªÙ‚Ø¯Ù…Ø©</button>
  </div>

  <!-- ... Ø¨Ø§Ù‚ÙŠ Ø§Ù„Ø¨Ø§Ù†Ù„Ø§Øª Ø§Ù„Ø­Ø§Ù„ÙŠØ© ... -->
</aside>

<section class="right card prediction">
  <!-- Ø§Ù„ØªÙ†Ø¨Ø¤Ø§Øª Ø§Ù„Ù…ØªÙ‚Ø¯Ù…Ø© -->
  <div class="pred-head">
    <div class="pred-title">Ø§Ù„ØªÙˆÙ‚Ø¹ Ø§Ù„Ù…ØªÙ‚Ø¯Ù… Ù„Ù„Ø¬ÙˆÙ„Ø© Ø§Ù„Ù‚Ø§Ø¯Ù…Ø©</div>
    <div class="pred-sub">Ù…Ø­Ù„Ù„ Ù…ØªÙƒØ§Ù…Ù„ + Ø£Ù†Ù…Ø§Ø· Ø¥Ø­ØµØ§Ø¦ÙŠØ© + ØªØ­Ù„ÙŠÙ„ ØªØ±Ø¯Ø¯ÙŠ</div>
  </div>

  <div class="color-legend">
    <span style="background:linear-gradient(135deg, #3a86ff, #2667cc);">ğŸ”µ Ù„Ø§Ø¹Ø¨</span>
    <span style="background:linear-gradient(135deg, #ff006e, #cc0058);">ğŸ”´ Ù…ØµØ±ÙÙŠ</span>
    <span style="background:linear-gradient(135deg, #38b000, #2c8a00);">ğŸŸ¢ ØªØ¹Ø§Ø¯Ù„</span>
  </div>
  
  <canvas id="advancedBigRoad" width="600" height="450"></canvas>

  <div class="prediction-cards">
    <div class="pred-card player" id="advancedPredP">
      <div>Ù„Ø§Ø¹Ø¨</div>
      <div id="advancedPredPctP">0%</div>
      <div style="font-size:10px; opacity:0.8;" id="playerTrend">-</div>
    </div>
    <div class="pred-card banker" id="advancedPredB">
      <div>Ù…ØµØ±ÙÙŠ</div>
      <div id="advancedPredPctB">0%</div>
      <div style="font-size:10px; opacity:0.8;" id="bankerTrend">-</div>
    </div>
    <div class="pred-card tie" id="advancedPredT">
      <div>ØªØ¹Ø§Ø¯Ù„</div>
      <div id="advancedPredPctT">0%</div>
      <div style="font-size:10px; opacity:0.8;" id="tieTrend">-</div>
    </div>
  </div>

  <div class="analysis-result">
    <div class="muted">Ø§Ù„ØªÙˆÙ‚Ø¹ Ø§Ù„Ù…ØªÙ‚Ø¯Ù…:</div>
    <div class="final" id="advancedFinalCard">â€”</div>
    <div style="font-size:12px; margin-top:5px; color:var(--muted)" id="predictionReason">â€”</div>
  </div>

  <!-- ... Ø¨Ø§Ù‚ÙŠ Ø§Ù„Ø£Ù‚Ø³Ø§Ù… ... -->
</section>
</main>
</div>

<script>
// Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ù…ØªÙƒØ§Ù…Ù„ Ø§Ù„Ù…ØªÙ‚Ø¯Ù…
class AdvancedBaccaratSystem {
    constructor() {
        this.isRunning = false;
        this.video = document.getElementById('advancedCameraView');
        this.canvas = document.createElement('canvas');
        this.ctx = this.canvas.getContext('2d');
        this.stream = null;
        this.scanInterval = null;
        
        // Ø¨ÙŠØ§Ù†Ø§Øª Ù…ØªÙ‚Ø¯Ù…Ø©
        this.detectionHistory = [];
        this.patternAnalysis = {
            playerStreaks: [],
            bankerStreaks: [],
            alternations: [],
            pairAnalysis: []
        };
        
        this.totalScans = 0;
        this.successfulScans = 0;
    }

    async startAdvancedScan() {
        try {
            this.stream = await navigator.mediaDevices.getUserMedia({ 
                video: { 
                    facingMode: 'environment',
                    width: { ideal: 1920 },
                    height: { ideal: 1080 }
                } 
            });
            
            this.video.srcObject = this.stream;
            this.video.style.display = 'block';
            document.getElementById('advancedScanOverlay').style.display = 'block';
            this.isRunning = true;
            
            this.updateAdvancedStatus('ğŸŸ¢ Ø§Ù„Ù…Ø³Ø­ Ø§Ù„Ù…ØªÙ‚Ø¯Ù… Ù†Ø´Ø· - ÙŠÙ‚Ø±Ø£ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª', 'active');
            
            this.startAdvancedScanning();
            
        } catch (error) {
            console.error('Error starting advanced camera:', error);
            this.updateAdvancedStatus('âŒ Ø®Ø·Ø£ ÙÙŠ ØªØ´ØºÙŠÙ„ Ø§Ù„Ù…Ø³Ø­ Ø§Ù„Ù…ØªÙ‚Ø¯Ù…', 'error');
        }
    }

    startAdvancedScanning() {
        const speed = 2000; // Ù…Ø³Ø­ ÙƒÙ„ 2 Ø«Ø§Ù†ÙŠØ©
        clearInterval(this.scanInterval);
        
        this.scanInterval = setInterval(() => {
            if (this.isRunning) {
                this.performComprehensiveScan();
            }
        }, speed);
    }

    performComprehensiveScan() {
        if (!this.isRunning || this.video.videoWidth === 0) return;
        
        this.totalScans++;
        
        // Ø¶Ø¨Ø· Ø£Ø¨Ø¹Ø§Ø¯ Ø§Ù„ÙƒØ§Ù†ÙØ§Ø³
        this.canvas.width = this.video.videoWidth;
        this.canvas.height = this.video.videoHeight;
        this.ctx.drawImage(this.video, 0, 0, this.canvas.width, this.canvas.height);
        
        // Ù…Ø­Ø§ÙƒØ§Ø© Ø§Ù„Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„Ù…ØªÙ‚Ø¯Ù…Ø©
        const comprehensiveData = this.simulateComprehensiveOCR();
        
        if (comprehensiveData.detected) {
            this.successfulScans++;
            this.processComprehensiveData(comprehensiveData);
        }
        
        this.updateScanStats();
    }

    simulateComprehensiveOCR() {
        // Ù…Ø­Ø§ÙƒØ§Ø© Ù…ØªÙ‚Ø¯Ù…Ø© Ù„Ù‚Ø±Ø§Ø¡Ø© Ø¬Ù…ÙŠØ¹ Ø¨ÙŠØ§Ù†Ø§Øª 1xbet
        const random = Math.random();
        
        if (random > 0.3) { // 70% ÙØ±ØµØ© Ù„Ù„ÙƒØ´Ù
            const playerScore = Math.floor(Math.random() * 10) + 6;
            const bankerScore = Math.floor(Math.random() * 10) + 4;
            const playerPair = Math.random() > 0.7;
            const bankerPair = Math.random() > 0.7;
            
            let winner = 'B';
            if (playerScore > bankerScore) winner = 'P';
            else if (playerScore === bankerScore) winner = 'T';
            
            return {
                detected: true,
                player: {
                    score: playerScore,
                    pair: playerPair
                },
                banker: {
                    score: bankerScore,
                    pair: bankerPair
                },
                winner: winner,
                confidence: Math.floor(Math.random() * 25) + 70, // 70-95%
                timestamp: Date.now(),
                gameId: `G${Date.now()}`
            };
        }
        
        return { detected: false };
    }

    processComprehensiveData(data) {
        // Ø­ÙØ¸ ÙÙŠ Ø§Ù„ØªØ§Ø±ÙŠØ®
        this.detectionHistory.push(data);
        if (this.detectionHistory.length > 100) {
            this.detectionHistory.shift();
        }
        
        // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¹Ø±Ø¶
        this.updateAdvancedDisplay(data);
        
        // Ø§Ù„ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ù…ØªÙ‚Ø¯Ù…
        this.analyzePatterns();
        
        // Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù†ØªÙŠØ¬Ø© Ù„Ù„ØªØ·Ø¨ÙŠÙ‚
        this.addToGameSystem(data.winner);
    }

    updateAdvancedDisplay(data) {
        document.getElementById('detectedPlayerScore').textContent = data.player.score;
        document.getElementById('detectedBankerScore').textContent = data.banker.score;
        document.getElementById('detectedPlayerPair').textContent = data.player.pair ? 'Ù†Ø¹Ù… âœ…' : 'Ù„Ø§ âŒ';
        document.getElementById('detectedBankerPair').textContent = data.banker.pair ? 'Ù†Ø¹Ù… âœ…' : 'Ù„Ø§ âŒ';
        
        let winnerText = 'â€”';
        let winnerColor = 'var(--muted)';
        
        if (data.winner === 'P') {
            winnerText = 'Ù„Ø§Ø¹Ø¨ ğŸŸ¢';
            winnerColor = '#3a86ff';
        } else if (data.winner === 'B') {
            winnerText = 'Ù…ØµØ±ÙÙŠ ğŸ”´';
            winnerColor = '#ff006e';
        } else if (data.winner === 'T') {
            winnerText = 'ØªØ¹Ø§Ø¯Ù„ ğŸŸ¡';
            winnerColor = '#38b000';
        }
        
        document.getElementById('detectedFinalWinner').textContent = winnerText;
        document.getElementById('detectedFinalWinner').style.color = winnerColor;
        document.getElementById('advancedResults').style.display = 'block';
    }

    analyzePatterns() {
        if (this.detectionHistory.length < 2) return;
        
        const recentGames = this.detectionHistory.slice(-20);
        
        // ØªØ­Ù„ÙŠÙ„ Ø§Ù„ØªØ±Ø¯Ø¯
        const counts = { P: 0, B: 0, T: 0 };
        recentGames.forEach(game => counts[game.winner]++);
        
        const total = recentGames.length;
        const frequencies = {
            P: (counts.P / total) * 100,
            B: (counts.B / total) * 100,
            T: (counts.T / total) * 100
        };
        
        // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¹Ø±Ø¶
        document.getElementById('patternPlayer').textContent = frequencies.P.toFixed(1) + '%';
        document.getElementById('patternBanker').textContent = frequencies.B.toFixed(1) + '%';
        document.getElementById('patternTie').textContent = frequencies.T.toFixed(1) + '%';
        
        // ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø³Ù„Ø§Ø³Ù„
        this.analyzeStreaks();
        
        // ØªØ­Ø¯ÙŠØ« Ø§Ù„ØªÙˆÙ‚Ø¹Ø§Øª Ø§Ù„Ù…ØªÙ‚Ø¯Ù…Ø©
        this.updateAdvancedPredictions(frequencies);
    }

    analyzeStreaks() {
        let currentStreak = 1;
        let currentWinner = this.detectionHistory[0].winner;
        let longestPlayer = 0, longestBanker = 0;
        let currentPlayer = 0, currentBanker = 0;
        
        for (let i = 1; i < this.detectionHistory.length; i++) {
            if (this.detectionHistory[i].winner === this.detectionHistory[i-1].winner) {
                currentStreak++;
                
                if (this.detectionHistory[i].winner === 'P') {
                    currentPlayer = currentStreak;
                    longestPlayer = Math.max(longestPlayer, currentStreak);
                } else if (this.detectionHistory[i].winner === 'B') {
                    currentBanker = currentStreak;
                    longestBanker = Math.max(longestBanker, currentStreak);
                }
            } else {
                currentStreak = 1;
            }
        }
        
        document.getElementById('longestPlayerStreak').textContent = longestPlayer;
        document.getElementById('longestBankerStreak').textContent = longestBanker;
        document.getElementById('currentAlternation').textContent = this.calculateAlternation();
    }

    calculateAlternation() {
        let alternationCount = 0;
        for (let i = 1; i < this.detectionHistory.length; i++) {
            if (this.detectionHistory[i].winner !== this.detectionHistory[i-1].winner) {
                alternationCount++;
            }
        }
        return alternationCount;
    }

    updateAdvancedPredictions(frequencies) {
        // ØªØ­Ù„ÙŠÙ„ Ù…ØªÙ‚Ø¯Ù… Ù„Ù„ØªÙˆÙ‚Ø¹Ø§Øª
        const advancedPrediction = this.calculateAdvancedPrediction(frequencies);
        
        document.getElementById('advancedPredPctP').textContent = advancedPrediction.P + '%';
        document.getElementById('advancedPredPctB').textContent = advancedPrediction.B + '%';
        document.getElementById('advancedPredPctT').textContent = advancedPrediction.T + '%';
        
        // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø§ØªØ¬Ø§Ù‡Ø§Øª
        this.updateTrends(advancedPrediction);
        
        // ØªØ­Ø¯ÙŠØ« Ø§Ù„ØªÙˆÙ‚Ø¹ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ
        let finalText = 'â€”';
        if (advancedPrediction.final === 'P') finalText = 'Ù„Ø§Ø¹Ø¨';
        else if (advancedPrediction.final === 'B') finalText = 'Ù…ØµØ±ÙÙŠ';
        else if (advancedPrediction.final === 'T') finalText = 'ØªØ¹Ø§Ø¯Ù„';
        
        document.getElementById('advancedFinalCard').textContent = finalText;
        document.getElementById('predictionReason').textContent = advancedPrediction.reason;
    }

    calculateAdvancedPrediction(frequencies) {
        // Ø®ÙˆØ§Ø±Ø²Ù…ÙŠØ© Ù…ØªÙ‚Ø¯Ù…Ø© ØªØ¬Ù…Ø¹ Ø¨ÙŠÙ†:
        // 1. Ø§Ù„ØªØ±Ø¯Ø¯ Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠ
        // 2. ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø³Ù„Ø§Ø³Ù„
        // 3. Ø§Ù„Ø£Ù†Ù…Ø§Ø· Ø§Ù„ØªØ§Ø±ÙŠØ®ÙŠØ©
        // 4. Ø§Ù„Ø§Ø­ØªÙ…Ø§Ù„Ø§Øª Ø§Ù„Ù…ØªÙ‚Ø¯Ù…Ø©
        
        let P = frequencies.P;
        let B = frequencies.B;
        let T = frequencies.T;
        
        // ØªØ¹Ø¯ÙŠÙ„ Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø§Ù„Ø³Ù„Ø§Ø³Ù„
        if (this.detectionHistory.length > 5) {
            const lastWinner = this.detectionHistory[this.detectionHistory.length - 1].winner;
            
            // ØªÙ‚Ù„ÙŠÙ„ Ø§Ø­ØªÙ…Ø§Ù„ ØªÙƒØ±Ø§Ø± Ù†ÙØ³ Ø§Ù„ÙØ§Ø¦Ø² ÙÙŠ Ø³Ù„Ø³Ù„Ø© Ø·ÙˆÙŠÙ„Ø©
            if (lastWinner === 'P' && this.getCurrentStreak('P') > 2) {
                P *= 0.8;
                B *= 1.2;
            } else if (lastWinner === 'B' && this.getCurrentStreak('B') > 2) {
                B *= 0.8;
                P *= 1.2;
            }
            
            // Ø²ÙŠØ§Ø¯Ø© Ø§Ø­ØªÙ…Ø§Ù„ Ø§Ù„ØªØ¹Ø§Ø¯Ù„ Ø¨Ø¹Ø¯ Ø³Ù„Ø³Ù„Ø© Ø·ÙˆÙŠÙ„Ø©
            if (this.getCurrentStreak('P') > 3 || this.getCurrentStreak('B') > 3) {
                T *= 1.3;
            }
        }
        
        // ØªØ·Ø¨ÙŠØ¹ Ø§Ù„Ù†Ø³Ø¨
        const total = P + B + T;
        const normalized = {
            P: (P / total) * 100,
            B: (B / total) * 100,
            T: (T / total) * 100
        };
        
        let final = Object.entries(normalized).sort((a, b) => b[1] - a[1])[0][0];
        let reason = "ØªØ­Ù„ÙŠÙ„ ØªØ±Ø¯Ø¯ÙŠ Ø£Ø³Ø§Ø³ÙŠ";
        
        if (normalized[final] < 35) {
            final = 'â€”';
            reason = "Ø«Ù‚Ø© Ù…Ù†Ø®ÙØ¶Ø© - Ù„Ø§ ØªÙˆÙ‚Ø¹";
        } else if (this.getCurrentStreak(final) > 3) {
            reason = "ÙƒØ³Ø± Ø³Ù„Ø³Ù„Ø© Ù…ØªÙˆÙ‚Ø¹Ø©";
        } else if (normalized[final] > 60) {
            reason = "ØªÙÙˆÙ‚ Ø¥Ø­ØµØ§Ø¦ÙŠ ÙˆØ§Ø¶Ø­";
        }
        
        return {
            P: normalized.P.toFixed(1),
            B: normalized.B.toFixed(1),
            T: normalized.T.toFixed(1),
            final: final,
            reason: reason
        };
    }

    getCurrentStreak(winner) {
        let streak = 0;
        for (let i = this.detectionHistory.length - 1; i >= 0; i--) {
            if (this.detectionHistory[i].winner === winner) {
                streak++;
            } else {
                break;
            }
        }
        return streak;
    }

    updateTrends(prediction) {
        // ØªØ­Ø¯ÙŠØ« Ù…Ø¤Ø´Ø±Ø§Øª Ø§Ù„Ø§ØªØ¬Ø§Ù‡
        const trends = {
            P: this.calculateTrend('P'),
            B: this.calculateTrend('B'),
            T: this.calculateTrend('T')
        };
        
        document.getElementById('playerTrend').textContent = trends.P;
        document.getElementById('bankerTrend').textContent = trends.B;
        document.getElementById('tieTrend').textContent = trends.T;
    }

    calculateTrend(type) {
        if (this.detectionHistory.length < 10) return "â†”";
        
        const recent = this.detectionHistory.slice(-10);
        const older = this.detectionHistory.slice(-20, -10);
        
        const recentCount = recent.filter(g => g.winner === type).length;
        const olderCount = older.filter(g => g.winner === type).length;
        
        if (recentCount > olderCount) return "â†—";
        if (recentCount < olderCount) return "â†˜";
        return "â†’";
    }

    addToGameSystem(winner) {
        setTimeout(() => {
            if (winner === 'P') {
                document.getElementById('btnP').click();
            } else if (winner === 'B') {
                document.getElementById('btnB').click();
            } else if (winner === 'T') {
                document.getElementById('btnT').click();
            }
        }, 1000);
    }

    updateScanStats() {
        document.getElementById('totalDetections').textContent = this.totalScans;
        const accuracy = this.totalScans > 0 ? (this.successfulScans / this.totalScans) * 100 : 0;
        document.getElementById('detectionAccuracy').textContent = accuracy.toFixed(1) + '%';
    }

    updateAdvancedStatus(message, type) {
        const statusEl = document.getElementById('advancedStatus');
        statusEl.innerHTML = message;
        
        statusEl.className = 'camera-status';
        if (type === 'active') statusEl.classList.add('camera-active');
        else if (type === 'detected') statusEl.style.background = 'rgba(0,255,0,0.2)';
    }

    stopAdvancedScan() {
        if (this.stream) {
            this.stream.getTracks().forEach(track => track.stop());
        }
        this.isRunning = false;
        this.video.style.display = 'none';
        document.getElementById('advancedScanOverlay').style.display = 'none';
        clearInterval(this.scanInterval);
        
        this.updateAdvancedStatus('ğŸ”´ Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ù…ØªÙ‚Ø¯Ù… ØºÙŠØ± Ù†Ø´Ø·', 'inactive');
        document.getElementById('advancedResults').style.display = 'none';
    }
}

// ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ù…ØªÙ‚Ø¯Ù…
const advancedSystem = new AdvancedBaccaratSystem();

// Ø¯Ø§Ù„Ø© Ø§Ù„Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ù…ØªÙ‚Ø¯Ù…
function processAdvancedInput() {
    const input = document.getElementById('quickInput').value.toUpperCase();
    let results = [];
    
    // Ø¯Ø¹Ù… multiple formats
    if (input.includes(',') || input.includes(' ')) {
        results = input.split(/[,.\s]+/).map(r => r.trim());
    } else {
        results = input.split('').map(r => r);
    }
    
    // ØªØ­ÙˆÙŠÙ„ Ø¥Ù„Ù‰ ØªÙ†Ø³ÙŠÙ‚ Ù…ÙˆØ­Ø¯
    const formattedResults = results.map(r => {
        if (r === 'PLAYER' || r === 'P') return 'P';
        if (r === 'BANKER' || r === 'B') return 'B';
        if (r === 'TIE' || r === 'T') return 'T';
        return null;
    }).filter(r => r !== null);
    
    if (formattedResults.length === 0) {
        alert('Ø£Ø¯Ø®Ù„ Ù†ØªØ§Ø¦Ø¬ ØµØ­ÙŠØ­Ø© (P, B, T Ø£Ùˆ Player, Banker, Tie)');
        return;
    }
    
    formattedResults.forEach((result, index) => {
        setTimeout(() => {
            if (result === 'P') document.getElementById('btnP').click();
            else if (result === 'B') document.getElementById('btnB').click();
            else if (result === 'T') document.getElementById('btnT').click();
        }, index * 200);
    });
    
    document.getElementById('quickInput').value = '';
}

// Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø£Ø­Ø¯Ø§Ø«
document.getElementById('btnStartAdvanced').onclick = () => advancedSystem.startAdvancedScan();
document.getElementById('btnStopAdvanced').onclick = () => advancedSystem.stopAdvancedScan();

// ... Ø¨Ø§Ù‚ÙŠ ÙƒÙˆØ¯ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ ÙŠØ¨Ù‚Ù‰ ÙƒÙ…Ø§ Ù‡Ùˆ ...
</script>
</body>
</html>
