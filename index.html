<!doctype html>
<html lang="ar">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>AYOUB BACCARAT PRO FULL - Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ù…Ø­Ø³Ù†Ø© Ù…Ø¹ ØªØ¹Ù„Ù… Ø§Ù„Ø¢Ù„Ø©</title>
<style>
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&display=swap');
:root{--gold:#d4af37;--gold-2:#b8871d;--bg-dark:#070606;--card:#0f0e10;--muted:#bfb7a6;--player:#2d7ef7;--banker:#e03b3b;--tie:#28a745;}
:root[data-theme="light"]{--gold:#d4af37;--gold-2:#b8871d;--bg-dark:#f5f5f5;--card:#ffffff;--muted:#666666;--player:#2d7ef7;--banker:#e03b3b;--tie:#28a745;}
*{box-sizing:border-box}
body{font-family:Inter,sans-serif;margin:0;background:linear-gradient(180deg,var(--bg-dark),#0b0b0b);color:#fff;padding:18px;transition:background 0.3s, color 0.3s;}
:root[data-theme="light"] body{color:#333;}
.app{max-width:1200px;margin:0 auto}
.top{display:flex;align-items:center;justify-content:space-between;gap:12px;margin-bottom:14px}
.logo{font-weight:800;background:linear-gradient(90deg,var(--gold),#fff3b0);color:#000;padding:8px 12px;border-radius:12px;display:inline-block}
.subtitle{font-size:14px;color:var(--muted);margin-top:4px}
.controls{display:flex;gap:8px;align-items:center}
.card{background:linear-gradient(180deg,var(--card),#0b0b0b);border-radius:12px;padding:12px;box-shadow:0 8px 30px rgba(0,0,0,0.6);border:1px solid rgba(212,175,55,0.08)}
:root[data-theme="light"] .card{background:linear-gradient(180deg,var(--card),#f0f0f0);box-shadow:0 8px 30px rgba(0,0,0,0.1);border:1px solid rgba(0,0,0,0.05)}
.layout{display:flex;gap:12px}
.left{width:360px;display:flex;flex-direction:column;gap:10px}
.right{flex:1;display:flex;flex-direction:column;gap:12px}
.panel{padding:10px}
.row{display:flex;gap:8px;align-items:center;margin-top:8px}
input[type=number], select{background:rgba(255,255,255,0.1);border:2px solid rgba(255,255,255,0.3);padding:10px;border-radius:8px;color:#fff;font-weight:600;font-size:14px;width:100%}
:root[data-theme="light"] input[type=number], :root[data-theme="light"] select{background:rgba(255,255,255,0.9);border:2px solid rgba(0,0,0,0.2);color:#333;}
.btn{padding:12px 16px;border-radius:8px;border:0;color:#fff;cursor:pointer;font-weight:600;font-size:16px;transition:all 0.3s}
.btn:hover{transform:translateY(-2px);box-shadow:0 4px 12px rgba(0,0,0,0.3)}
.btn.gold{background:linear-gradient(90deg,var(--gold),var(--gold-2));color:#000;font-weight:700;box-shadow:0 6px 20px rgba(212,175,55,0.3)}

/* Ø£Ù„ÙˆØ§Ù† ÙˆØ§Ø¶Ø­Ø© Ù„Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù„ÙŠÙ„ÙŠ */
.btn.player{background:linear-gradient(135deg, #3a86ff, #2667cc); color:white; border:2px solid #3a86ff;}
.btn.banker{background:linear-gradient(135deg, #ff006e, #cc0058); color:white; border:2px solid #ff006e;}
.btn.tie{background:linear-gradient(135deg, #38b000, #2c8a00); color:white; border:2px solid #38b000;}

/* Ø£Ù„ÙˆØ§Ù† Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù†Ù‡Ø§Ø±ÙŠ */
:root[data-theme="light"] .btn.player{background:linear-gradient(135deg, #2d7ef7, #1a67d8); color:white;}
:root[data-theme="light"] .btn.banker{background:linear-gradient(135deg, #e03b3b, #c53232); color:white;}
:root[data-theme="light"] .btn.tie{background:linear-gradient(135deg, #28a745, #218838); color:white;}

:root[data-theme="light"] .btn{background:rgba(0,0,0,0.1);color:#333; border:1px solid rgba(0,0,0,0.1)}

.small{font-size:13px;color:var(--muted)}
.muted{color:var(--muted);font-size:12px}
.pattern-list{list-style:none;padding:6px;margin:6px 0 0 0;max-height:200px;overflow:auto}
.pattern-list li{padding:8px;border-radius:8px;margin-bottom:6px;background:linear-gradient(180deg,rgba(255,255,255,0.02),transparent);display:flex;justify-content:space-between;align-items:center}
:root[data-theme="light"] .pattern-list li{background:linear-gradient(180deg,rgba(0,0,0,0.02),transparent)}
.section-title{font-weight:700;margin-bottom:6px;color:var(--gold)}
.stat-table{width:100%;border-collapse:collapse}
.stat-table th,.stat-table td{border:1px solid rgba(255,255,255,0.05);padding:6px;text-align:center}
:root[data-theme="light"] .stat-table th, :root[data-theme="light"] .stat-table td{border:1px solid rgba(0,0,0,0.05)}
.stat-table th{background:rgba(212,175,55,0.1);font-weight:600}
.player{color:#3a86ff;font-weight:700}
.banker{color:#ff006e;font-weight:700}
.tie{color:#38b000;font-weight:700}
.pred-head{display:flex;justify-content:space-between;align-items:center}
.final{font-size:22px;font-weight:800;text-align:center;padding:12px;background:linear-gradient(90deg,rgba(212,175,55,0.06),transparent);border-radius:10px}
:root[data-theme="light"] .final{background:linear-gradient(90deg,rgba(212,175,55,0.1),transparent)}
.foot{display:flex;justify-content:space-between;align-items:center;margin-top:14px}
.credits{opacity:0.85}
canvas{border-radius:10px;background:#0f0e10}
:root[data-theme="light"] canvas{background:#f0f0f0}
.color-legend{display:flex;gap:15px;justify-content:center;margin-bottom:10px;font-size:14px}
.color-legend span{padding:4px 8px;border-radius:6px; font-weight:600;}
.prediction-cards{display:flex;gap:10px;justify-content:center;margin:10px 0}
.pred-card{padding:10px;border-radius:8px;text-align:center;min-width:80px; font-weight:600;}
.pred-card.active{transform:scale(1.1);border:2px solid var(--gold); box-shadow:0 4px 15px rgba(212,175,55,0.4);}
.win-effect{animation:winPulse 0.5s ease-in-out}
.loss-effect{animation:lossShake 0.5s ease-in-out}
@keyframes winPulse{0%{transform:scale(1)}50%{transform:scale(1.2)}100%{transform:scale(1)}}
@keyframes lossShake{0%,100%{transform:translateX(0)}25%{transform:translateX(-5px)}75%{transform:translateX(5px)}}
.analysis-result{margin-top:10px;padding:10px;background:rgba(255,255,255,0.03);border-radius:8px;text-align:center}
:root[data-theme="light"] .analysis-result{background:rgba(0,0,0,0.03)}
.theme-toggle{background:transparent;border:none;font-size:24px;cursor:pointer;padding:5px;border-radius:50%;transition:background 0.3s}
.theme-toggle:hover{background:rgba(255,255,255,0.1)}
:root[data-theme="light"] .theme-toggle:hover{background:rgba(0,0,0,0.05)}

/* ØªØ­Ø³ÙŠÙ†Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ© Ù„Ù„Ø­Ù‚ÙˆÙ„ */
.input-group {display: flex; gap: 8px; align-items: center;}
.input-group input {flex: 1;}
.input-label {font-weight: 600; margin-bottom: 6px; display: block;}

/* Ø£Ù„ÙˆØ§Ù† Ø§Ù„Ø¨Ø·Ø§Ù‚Ø§Øª ÙÙŠ Ø§Ù„ØªÙˆÙ‚Ø¹ */
.pred-card.player {background: linear-gradient(135deg, #3a86ff, #2667cc); color: white;}
.pred-card.banker {background: linear-gradient(135deg, #ff006e, #cc0058); color: white;}
.pred-card.tie {background: linear-gradient(135deg, #38b000, #2c8a00); color: white;}

/* Ø£Ù†Ù…Ø§Ø· Ù„Ù…Ù†Ø­Ù†Ù‰ Ø§Ù„ØªÙˆÙ‚Ø¹Ø§Øª */
.accuracy-panel {margin-top: 12px;}
.accuracy-stats {display: flex; justify-content: space-between; margin-bottom: 8px;}
.accuracy-value {font-weight: 700; font-size: 18px;}
.accuracy-label {font-size: 12px; color: var(--muted);}
.accuracy-chart-container {position: relative; height: 80px; margin-top: 8px;}
.accuracy-line {stroke: var(--gold); stroke-width: 2; fill: none;}
.accuracy-point {fill: var(--gold); r: 3; transition: r 0.2s;}
.accuracy-point:hover {r: 5;}
.accuracy-grid {stroke: rgba(255,255,255,0.1); stroke-width: 1;}
:root[data-theme="light"] .accuracy-grid {stroke: rgba(0,0,0,0.1);}
.accuracy-tooltip {position: absolute; background: rgba(0,0,0,0.8); color: white; padding: 5px 8px; border-radius: 4px; font-size: 12px; pointer-events: none; opacity: 0; transition: opacity 0.2s;}

/* Ø£Ù†Ù…Ø§Ø· Ø¬Ø¯ÙŠØ¯Ø© Ù„Ù„ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù…Ø­Ø³Ù†Ø© */
.advanced-controls {background: rgba(212,175,55,0.05); border-radius: 8px; padding: 10px; margin-top: 8px;}
.control-group {display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;}
.control-group:last-child {margin-bottom: 0;}
.slider-container {flex: 1; margin-left: 10px;}
.slider {width: 100%;}
.model-badge {display: inline-block; padding: 2px 8px; border-radius: 12px; font-size: 10px; font-weight: 600; margin-left: 5px;}
.badge-basic {background: #3a86ff; color: white;}
.badge-advanced {background: #ff006e; color: white;}
.badge-pattern {background: #38b000; color: white;}
.badge-ml {background: #9d4edd; color: white;}
.pattern-info {font-size: 11px; color: var(--muted); margin-top: 4px;}
.confidence-meter {height: 6px; background: rgba(255,255,255,0.1); border-radius: 3px; margin-top: 4px; overflow: hidden;}
.confidence-fill {height: 100%; background: linear-gradient(90deg, #38b000, #ff006e); border-radius: 3px; transition: width 0.3s;}
.high-confidence {background: linear-gradient(90deg, #38b000, #d4af37);}
.medium-confidence {background: linear-gradient(90deg, #d4af37, #ff006e);}

/* ØªØ¨Ø¯ÙŠÙ„ Ø²Ø± Ø§Ù„ØªØ¹Ù„Ù… Ø§Ù„Ø¢Ù„ÙŠ */
.switch {position: relative; display: inline-block; width: 50px; height: 24px;}
.switch input {opacity: 0; width: 0; height: 0;}
.switch .slider {position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background-color: #ccc; transition: .4s; border-radius: 34px;}
.switch .slider:before {position: absolute; content: ""; height: 16px; width: 16px; left: 4px; bottom: 4px; background-color: white; transition: .4s; border-radius: 50%;}
.switch input:checked + .slider {background: linear-gradient(90deg, #9d4edd, #7b2cbf);}
.switch input:checked + .slider:before {transform: translateX(26px);}

/* Ù…Ø¤Ø´Ø± ØªØ¯Ø±ÙŠØ¨ ML */
.ml-training-indicator {display: inline-block; width: 10px; height: 10px; border-radius: 50%; margin-right: 5px;}
.ml-training {background: #38b000; animation: pulse 1.5s infinite;}
.ml-not-trained {background: #ff006e;}
@keyframes pulse {0% {opacity: 1;} 50% {opacity: 0.5;} 100% {opacity: 1;}}

/* ØªØ­Ø³ÙŠÙ†Ø§Øª Ù„Ù„ÙˆØ§Ø¬Ù‡Ø© */
.ml-info-panel {background: rgba(157, 78, 221, 0.05); border-left: 3px solid #9d4edd;}
</style>
</head>
<body>
<div class="app">
<header class="top card">
  <div class="brand">
    <div class="logo">AYOUB BACCARAT PRO <span class="model-badge badge-ml">Ù…Ø¹ ØªØ¹Ù„Ù… Ø§Ù„Ø¢Ù„Ø©</span></div>
    <div class="subtitle">Ù†Ø¸Ø§Ù… ØªÙ†Ø¨Ø¤ Ø°ÙƒÙŠ Ù…ØªÙ‚Ø¯Ù… Ù…Ø¹ Ø®ÙˆØ§Ø±Ø²Ù…ÙŠØ§Øª ØªØ¹Ù„Ù… Ø¢Ù„Ø© ğŸ§ ğŸ°ğŸš€</div>
  </div>
  <div class="controls">
    <button id="themeToggle" class="theme-toggle">ğŸŒš</button>
    <button id="btnReset" class="btn gold">Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ†</button>
  </div>
</header>

<main class="card layout">
<aside class="left">
  <div class="panel card">
    <label class="input-label">Ù†Ø§ÙØ°Ø© Ø§Ù„ØªØ­Ù„ÙŠÙ„ (5 - 15)</label>
    <div class="input-group">
      <input id="windowSize" type="number" min="5" max="15" value="8">
      <button id="applyWindow" class="btn gold">ØªØ·Ø¨ÙŠÙ‚</button>
    </div>
    <div class="muted small">ÙŠØ­Ù„Ù„ Ø¢Ø®Ø± 5-15 Ø¬ÙˆÙ„Ø© Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø®ÙˆØ§Ø±Ø²Ù…ÙŠØ§Øª Ù…ØªÙ‚Ø¯Ù…Ø©</div>
  </div>

  <!-- Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„ØªÙ†Ø¨Ø¤ Ø§Ù„Ù…ØªÙ‚Ø¯Ù… -->
  <div class="panel card">
    <div class="section-title">Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„ØªÙ†Ø¨Ø¤ Ø§Ù„Ù…ØªÙ‚Ø¯Ù…</div>
    <div class="advanced-controls">
      <div class="control-group">
        <label for="analysisMode">Ù†Ù…Ø· Ø§Ù„ØªØ­Ù„ÙŠÙ„:</label>
        <select id="analysisMode">
          <option value="basic">Ø£Ø³Ø§Ø³ÙŠ <span class="model-badge badge-basic">+5%</span></option>
          <option value="advanced" selected>Ù…ØªÙ‚Ø¯Ù… <span class="model-badge badge-advanced">+15%</span></option>
          <option value="pattern">ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø£Ù†Ù…Ø§Ø· <span class="model-badge badge-pattern">+25%</span></option>
          <option value="ml">ØªØ¹Ù„Ù… Ø§Ù„Ø¢Ù„Ø© <span class="model-badge badge-ml">+35%</span></option>
        </select>
      </div>
      <div class="control-group">
        <label for="confidenceSensitivity">Ø­Ø³Ø§Ø³ÙŠØ© Ø§Ù„Ø«Ù‚Ø©:</label>
        <div class="slider-container">
          <input type="range" id="confidenceSensitivity" class="slider" min="30" max="60" value="45">
          <div class="muted small" id="sensitivityValue">45%</div>
        </div>
      </div>
      <div class="control-group">
        <label for="timeWeighting">Ø§Ù„Ù…Ø±Ø¬Ø­Ø© Ø§Ù„Ø²Ù…Ù†ÙŠØ©:</label>
        <select id="timeWeighting">
          <option value="none">Ø¨Ø¯ÙˆÙ†</option>
          <option value="linear" selected>Ø®Ø·ÙŠ</option>
          <option value="exponential">Ø£Ø³Ù‘ÙŠ</option>
        </select>
      </div>
    </div>
  </div>

  <!-- Ù‚Ø³Ù… ØªØ¹Ù„Ù… Ø§Ù„Ø¢Ù„Ø© Ø§Ù„Ø¬Ø¯ÙŠØ¯ -->
  <div class="panel card ml-info-panel">
    <div class="section-title">âš™ï¸ ØªØ¹Ù„Ù… Ø§Ù„Ø¢Ù„Ø©</div>
    <div class="row">
      <label class="switch">
        <input type="checkbox" id="mlToggle" checked>
        <span class="slider"></span>
      </label>
      <span>ØªÙØ¹ÙŠÙ„ ØªØ¹Ù„Ù… Ø§Ù„Ø¢Ù„Ø©</span>
    </div>
    <div class="row">
      <select id="mlModelSelect" style="flex:1; margin-top: 5px;">
        <option value="knn">K-Ø§Ù„Ø¬ÙŠØ±Ø§Ù† Ø§Ù„Ø£Ù‚Ø±Ø¨</option>
        <option value="logistic">Ø§Ù„Ø§Ù†Ø­Ø¯Ø§Ø± Ø§Ù„Ù„ÙˆØ¬Ø³ØªÙŠ</option>
        <option value="ensemble">Ø§Ù„Ù…Ø¬Ù…Ø¹ (Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù†Ù…Ø§Ø°Ø¬)</option>
      </select>
    </div>
    <div class="row">
      <div id="mlStatus" class="muted small">
        <span class="ml-training-indicator ml-training"></span> 
        Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ ÙŠØªØ¹Ù„Ù… Ù…Ù† Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª...
      </div>
    </div>
    <div class="pattern-info">
      <span id="mlTrainingCount">0</span> Ø¹ÙŠÙ†Ø© ØªØ¯Ø±ÙŠØ¨ â€¢ 
      <span id="mlAccuracy">0%</span> Ø¯Ù‚Ø© â€¢ 
      <span id="mlWeight">30%</span> ØªØ£Ø«ÙŠØ±
    </div>
  </div>

  <div class="panel card">
    <div class="section-title">Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ù†ØªØ§Ø¦Ø¬</div>
    <div class="row">
      <button class="btn player" id="btnP">Ù„Ø§Ø¹Ø¨ ğŸ”µ</button>
      <button class="btn banker" id="btnB">Ù…ØµØ±ÙÙŠ ğŸ”´</button>
      <button class="btn tie" id="btnT">ØªØ¹Ø§Ø¯Ù„ ğŸŸ¢</button>
    </div>
    <div class="row">
      <button class="btn" id="btnUndo" style="flex:1; background:rgba(255,255,255,0.1); border:1px solid rgba(255,255,255,0.2)">ØªØ±Ø§Ø¬Ø¹</button>
    </div>
  </div>

  <div class="panel card stats">
    <div class="section-title">Ø§Ù„Ø¥Ø­ØµØ§Ø¡Ø§Øª Ø§Ù„Ù…ØªÙ‚Ø¯Ù…Ø©</div>
    <table class="stat-table">
      <thead>
        <tr><th>Ø§Ù„Ø¬Ù‡Ø©</th><th>Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹</th><th>ÙÙˆØ²</th><th>Ø®Ø³Ø§Ø±Ø©</th><th>Ù†Ø³Ø¨Ø© %</th><th>Ø¯Ù‚Ø©</th><th>ML Ø¯Ù‚Ø©</th></tr>
      </thead>
      <tbody>
        <tr><td class="player">Ù„Ø§Ø¹Ø¨</td><td id="pTotal">0</td><td id="pWin">0</td><td id="pLoss">0</td><td id="pPct">0%</td><td id="pAccuracy">0%</td><td id="pMLAccuracy">0%</td></tr>
        <tr><td class="banker">Ù…ØµØ±ÙÙŠ</td><td id="bTotal">0</td><td id="bWin">0</td><td id="bLoss">0</td><td id="bPct">0%</td><td id="bAccuracy">0%</td><td id="bMLAccuracy">0%</td></tr>
        <tr><td class="tie">ØªØ¹Ø§Ø¯Ù„</td><td id="tTotal">0</td><td id="tWin">0</td><td id="tLoss">0</td><td id="tPct">0%</td><td id="tAccuracy">0%</td><td id="tMLAccuracy">0%</td></tr>
      </tbody>
    </table>
    <div class="pattern-info" id="patternInfo">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø£Ù†Ù…Ø§Ø· Ù…ÙƒØªØ´ÙØ© Ø¨Ø¹Ø¯</div>
  </div>

  <div class="panel card">
    <div class="section-title">Ù…Ø¤Ø´Ø± Ø§Ù„Ø«Ù‚Ø©</div>
    <div class="muted small" id="confidenceLabel">Ø«Ù‚Ø© Ù…Ù†Ø®ÙØ¶Ø©</div>
    <div class="confidence-meter">
      <div class="confidence-fill" id="confidenceFill" style="width: 0%"></div>
    </div>
    <div class="pattern-info" id="modelInfo">Ø§Ù„Ù†Ù…ÙˆØ°Ø¬: Ø£Ø³Ø§Ø³ÙŠ</div>
  </div>
</aside>

<section class="right card prediction">
  <div class="pred-head">
    <div class="pred-title">ØªÙˆÙ‚Ø¹ Ø§Ù„Ø¬ÙˆÙ„Ø© Ø§Ù„Ù‚Ø§Ø¯Ù…Ø© <span id="predModel" class="model-badge badge-basic">Ø£Ø³Ø§Ø³ÙŠ</span></div>
    <div class="pred-sub">Ù†Ø¸Ø§Ù… ØªÙ†Ø¨Ø¤ Ù…ØªØ¹Ø¯Ø¯ Ø§Ù„Ù†Ù…Ø§Ø°Ø¬ Ù…Ø¹ Ø®ÙˆØ§Ø±Ø²Ù…ÙŠØ§Øª ØªØ¹Ù„Ù… Ø¢Ù„Ø©</div>
  </div>

  <div class="color-legend">
    <span style="background:linear-gradient(135deg, #3a86ff, #2667cc);">ğŸ”µ Ù„Ø§Ø¹Ø¨</span>
    <span style="background:linear-gradient(135deg, #ff006e, #cc0058);">ğŸ”´ Ù…ØµØ±ÙÙŠ</span>
    <span style="background:linear-gradient(135deg, #38b000, #2c8a00);">ğŸŸ¢ ØªØ¹Ø§Ø¯Ù„</span>
  </div>
  
  <canvas id="bigRoad" width="600" height="450"></canvas>

  <div class="prediction-cards">
    <div class="pred-card player" id="predP">
      <div>Ù„Ø§Ø¹Ø¨</div>
      <div id="predPctP">0%</div>
      <div class="muted small" id="predTrendP">â†’</div>
    </div>
    <div class="pred-card banker" id="predB">
      <div>Ù…ØµØ±ÙÙŠ</div>
      <div id="predPctB">0%</div>
      <div class="muted small" id="predTrendB">â†’</div>
    </div>
    <div class="pred-card tie" id="predT">
      <div>ØªØ¹Ø§Ø¯Ù„</div>
      <div id="predPctT">0%</div>
      <div class="muted small" id="predTrendT">â†’</div>
    </div>
  </div>

  <div class="analysis-result">
    <div class="muted">Ø§Ù„ØªÙˆÙ‚Ø¹ Ø§Ù„Ø­Ø§Ù„ÙŠ:</div>
    <div class="final" id="finalCard">â€”</div>
    <div class="muted small" id="predictionReason">Ø¨Ø§Ù†ØªØ¸Ø§Ø± Ø¨ÙŠØ§Ù†Ø§Øª ÙƒØ§ÙÙŠØ© Ù„Ù„ØªØ­Ù„ÙŠÙ„</div>
    <div class="muted small" id="mlContribution" style="margin-top: 5px; color: #9d4edd;"></div>
  </div>

  <!-- Ù…Ù†Ø­Ù†Ù‰ Ø§Ù„ØªÙˆÙ‚Ø¹Ø§Øª Ø§Ù„Ù…Ø¶Ø§Ù -->
  <div class="panel card accuracy-panel">
    <div class="section-title">Ù…Ù†Ø­Ù†Ù‰ Ø¯Ù‚Ø© Ø§Ù„ØªÙˆÙ‚Ø¹Ø§Øª Ø§Ù„Ù…ØªÙ‚Ø¯Ù…</div>
    <div class="accuracy-stats">
      <div>
        <div class="accuracy-label">Ø§Ù„Ø¯Ù‚Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ©</div>
        <div class="accuracy-value" id="currentAccuracy">0%</div>
      </div>
      <div>
        <div class="accuracy-label">Ø£ÙØ¶Ù„ Ø¯Ù‚Ø©</div>
        <div class="accuracy-value" id="bestAccuracy">0%</div>
      </div>
      <div>
        <div class="accuracy-label">Ù…ØªÙˆØ³Ø· Ø§Ù„Ø¯Ù‚Ø©</div>
        <div class="accuracy-value" id="averageAccuracy">0%</div>
      </div>
      <div>
        <div class="accuracy-label">Ø¯Ù‚Ø© ML</div>
        <div class="accuracy-value" id="mlOverallAccuracy">0%</div>
      </div>
    </div>
    <div class="accuracy-chart-container">
      <svg id="accuracyChart" width="100%" height="100%"></svg>
      <div id="accuracyTooltip" class="accuracy-tooltip"></div>
    </div>
    <div class="muted small">ØªØªØ¨Ø¹ Ø¯Ù‚Ø© ØªÙˆÙ‚Ø¹Ø§ØªÙƒ Ù…Ø¹ ØªØ­Ù„ÙŠÙ„ Ø£Ø¯Ø§Ø¡ Ø§Ù„Ù†Ù…Ø§Ø°Ø¬ Ø§Ù„Ù…Ø®ØªÙ„ÙØ©</div>
  </div>
</section>
</main>

<footer class="foot card">
<div>ØªØµÙ…ÙŠÙ…: Ayoub â€¢ Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ù…Ø­Ø³Ù†Ø© Ù…Ø¹ ØªØ¹Ù„Ù… Ø§Ù„Ø¢Ù„Ø©</div>
<div class="credits small">Ù†Ø¸Ø§Ù… Ù…ØªØ¹Ø¯Ø¯ Ø§Ù„Ù†Ù…Ø§Ø°Ø¬ â€¢ ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø£Ù†Ù…Ø§Ø· â€¢ Ø®ÙˆØ§Ø±Ø²Ù…ÙŠØ§Øª ML â€¢ Ù…Ø±Ø¬Ø­Ø© Ø²Ù…Ù†ÙŠØ© â€¢ Ù…Ø¤Ø´Ø±Ø§Øª Ù…ØªÙ‚Ø¯Ù…Ø©</div>
</footer>

<script>
// ========== Ø®ÙˆØ§Ø±Ø²Ù…ÙŠØ§Øª ØªØ¹Ù„Ù… Ø§Ù„Ø¢Ù„Ø© ==========

// 1. K-Ø§Ù„Ø£Ù‚Ø±Ø¨ Ø¬ÙŠØ±Ø§Ù†
class SimpleKNN {
  constructor(k = 3) {
    this.k = k;
    this.trainingData = [];
    this.predictions = { correct: 0, total: 0 };
  }

  train(features, labels) {
    features.forEach((f, i) => {
      this.trainingData.push({
        features: f,
        label: labels[i]
      });
    });
  }

  predict(newFeatures) {
    if (this.trainingData.length === 0) return { P: 0.33, B: 0.33, T: 0.33 };

    const distances = this.trainingData.map((dataPoint, index) => ({
      index,
      distance: this.euclideanDistance(newFeatures, dataPoint.features),
      label: dataPoint.label
    }));

    distances.sort((a, b) => a.distance - b.distance);
    const nearestNeighbors = distances.slice(0, this.k);
    
    const votes = { P: 0, B: 0, T: 0 };
    nearestNeighbors.forEach(n => {
      votes[n.label] += 1 / (n.distance + 1);
    });

    const total = votes.P + votes.B + votes.T;
    return {
      P: (votes.P / total) * 100,
      B: (votes.B / total) * 100,
      T: (votes.T / total) * 100
    };
  }

  euclideanDistance(a, b) {
    return Math.sqrt(
      a.reduce((sum, val, i) => sum + Math.pow(val - b[i], 2), 0)
    );
  }

  updateAccuracy(prediction, actual) {
    this.predictions.total++;
    if (prediction === actual) this.predictions.correct++;
  }

  getAccuracy() {
    return this.predictions.total > 0 ? 
      (this.predictions.correct / this.predictions.total) * 100 : 0;
  }
}

// 2. Ø§Ù„Ø§Ù†Ø­Ø¯Ø§Ø± Ø§Ù„Ù„ÙˆØ¬Ø³ØªÙŠ Ø§Ù„Ù…Ø¨Ø³Ø·
class SimpleLogisticRegression {
  constructor() {
    this.weights = { P: 0.1, B: 0.1, T: 0.1 };
    this.bias = 0;
    this.learningRate = 0.05;
    this.predictions = { correct: 0, total: 0 };
  }

  sigmoid(x) {
    return 1 / (1 + Math.exp(-x));
  }

  trainOne(features, label) {
    // ØªØ­ÙˆÙŠÙ„ Ø§Ù„ØªØ³Ù…ÙŠØ© Ø¥Ù„Ù‰ Ø±Ù‚Ù…
    const labelNum = { P: 0, B: 1, T: 2 }[label];
    
    // Ø­Ø³Ø§Ø¨ Ø§Ù„ØªÙ†Ø¨Ø¤
    const scores = features.map(f => 
      f[0] * this.weights.P + f[1] * this.weights.B + f[2] * this.weights.T + this.bias
    );
    const prediction = this.sigmoid(scores[0]);
    
    // Ø­Ø³Ø§Ø¨ Ø§Ù„Ø®Ø·Ø£
    const error = (labelNum / 2) - prediction;
    
    // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø£ÙˆØ²Ø§Ù†
    this.weights.P += this.learningRate * error * features[0][0];
    this.weights.B += this.learningRate * error * features[0][1];
    this.weights.T += this.learningRate * error * features[0][2];
    this.bias += this.learningRate * error;
  }

  predict(features) {
    if (!features || features.length === 0) return { P: 33.3, B: 33.3, T: 33.3 };
    
    const scores = features.map(f => 
      f[0] * this.weights.P + f[1] * this.weights
