<!doctype html>
<html lang="ar">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>AYOUB BACCARAT PRO FULL</title>
<style>
/* ูู ุงูุณุชุงููุงุช ุงูุฃุตููุฉ ุชุจูู ููุง ูู */

/* ุฃููุงุท ุงููุธุงู ุงูุนููู */
.practical-system { background: rgba(212,175,55,0.1); padding: 12px; border-radius: 8px; margin: 10px 0; }
.screen-guide { background: rgba(255,255,255,0.05); padding: 10px; border-radius: 8px; margin: 8px 0; text-align: center; }
.guide-image { max-width: 100%; border-radius: 6px; margin: 8px 0; background: var(--card); padding: 10px; }
.manual-controls { display: grid; grid-template-columns: 1fr 1fr; gap: 8px; margin-top: 10px; }
</style>
</head>
<body>
<div class="app">
<header class="top card">
  <div class="brand">
    <div class="logo">AYOUB BACCARAT PRO</div>
    <div class="subtitle">ูุธุงู ุชุญููู ุฐูู ูุงูุนู ๐ฐ๐</div>
  </div>
  <div class="controls">
    <button id="themeToggle" class="theme-toggle">๐</button>
    <button id="btnReset" class="btn gold">ุฅุนุงุฏุฉ ุชุนููู</button>
  </div>
</header>

<main class="card layout">
<aside class="left">
  <!-- ุงููุธุงู ุงูุนููู ุงูุฌุฏูุฏ -->
  <div class="panel card practical-system">
    <div class="section-title">๐ฏ ุงููุธุงู ุงูุนููู</div>
    
    <div class="screen-guide">
      <div class="muted small">๐ ุดูู ุงููุชูุฌุฉ ูู 1xbet ุซู ุงุถุบุท:</div>
      
      <div class="manual-controls">
        <button class="btn player" onclick="addManualResult('P')">
          ูุงุนุจ ูุงุฒ โ<br>
          <span style="font-size:10px; opacity:0.8;">PLAYER ุฑุจุญ</span>
        </button>
        
        <button class="btn banker" onclick="addManualResult('B')">
          ูุตุฑูู ูุงุฒ โ<br>
          <span style="font-size:10px; opacity:0.8;">BANKER ุฑุจุญ</span>
        </button>
        
        <button class="btn tie" onclick="addManualResult('T')" style="grid-column: span 2;">
          ุชุนุงุฏู โ<br>
          <span style="font-size:10px; opacity:0.8;">TIE</span>
        </button>
      </div>
    </div>

    <div class="muted small" style="text-align: center; margin-top: 8px;">
      ๐ก <strong>ุงูุทุฑููุฉ ุงูุตุญูุญุฉ:</strong><br>
      1. ุงูุชุญ 1xbet ูู ุฌูุงุฒ ุขุฎุฑ<br>
      2. ุดูู ุงููุชูุฌุฉ<br>
      3. ุงุถุบุท ุงูุฒุฑ ุงูููุงุณุจ ููุง
    </div>
  </div>

  <!-- ุงูุฅุฏุฎุงู ุงูุณุฑูุน -->
  <div class="panel card">
    <div class="section-title">โก ุฅุฏุฎุงู ุณุฑูุน ูุนุฏุฉ ูุชุงุฆุฌ</div>
    <textarea id="quickInput" class="quick-input" placeholder="ุฃุฏุฎู ุณูุณูุฉ ูุชุงุฆุฌ (ูุซุงู: P,B,T,P,B)"></textarea>
    <button class="btn gold" onclick="processQuickInput()" style="margin-top:8px; width:100%">
      ูุนุงูุฌุฉ ุงููุชุงุฆุฌ
    </button>
    <div class="muted small">
      P = ูุงุนุจ, B = ูุตุฑูู, T = ุชุนุงุฏู<br>
      ูุซุงู: P,B,T,P,B,B,T
    </div>
  </div>

  <!-- ุฅุญุตุงุฆูุงุช ุณุฑูุนุฉ -->
  <div class="panel card">
    <div class="section-title">๐ ุฅุญุตุงุฆูุงุช ููุฑูุฉ</div>
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 8px; text-align: center;">
      <div style="background: rgba(59, 130, 246, 0.1); padding: 8px; border-radius: 6px;">
        <div style="font-size: 12px; color: var(--muted);">ูุงุนุจ</div>
        <div style="font-weight: bold; color: #3a86ff;" id="quickPlayer">0%</div>
      </div>
      <div style="background: rgba(239, 68, 68, 0.1); padding: 8px; border-radius: 6px;">
        <div style="font-size: 12px; color: var(--muted);">ูุตุฑูู</div>
        <div style="font-weight: bold; color: #ff006e;" id="quickBanker">0%</div>
      </div>
      <div style="background: rgba(34, 197, 94, 0.1); padding: 8px; border-radius: 6px; grid-column: span 2;">
        <div style="font-size: 12px; color: var(--muted);">ุชุนุงุฏู</div>
        <div style="font-weight: bold; color: #38b000;" id="quickTie">0%</div>
      </div>
    </div>
  </div>

  <!-- ุงูุชุญููู ุงููุชูุฏู -->
  <div class="panel card advanced-analysis">
    <div class="section-title">๐ ุชุญููู ุงูุฃููุงุท</div>
    
    <div class="pattern-grid">
      <div class="pattern-item">
        <div class="pattern-value" id="patternPlayer">0%</div>
        <div class="pattern-label">ูุงุนุจ</div>
      </div>
      <div class="pattern-item">
        <div class="pattern-value" id="patternBanker">0%</div>
        <div class="pattern-label">ูุตุฑูู</div>
      </div>
      <div class="pattern-item">
        <div class="pattern-value" id="patternTie">0%</div>
        <div class="pattern-label">ุชุนุงุฏู</div>
      </div>
    </div>

    <div style="margin-top:10px; font-size:12px;">
      <div class="detection-item">
        <span>ุขุฎุฑ 5 ุฌููุงุช:</span>
        <span id="last5Rounds" style="font-weight:bold;">-</span>
      </div>
      <div class="detection-item">
        <span>ุงูุงุชุฌุงู:</span>
        <span id="currentTrend" style="font-weight:bold;">-</span>
      </div>
    </div>
  </div>

  <!-- ุงูุชุญูู ุงูุฃุณุงุณู -->
  <div class="panel card">
    <div class="section-title">๐ฎ ุงูุชุญูู</div>
    <div class="row">
      <button class="btn player" id="btnP">ูุงุนุจ ๐ต</button>
      <button class="btn banker" id="btnB">ูุตุฑูู ๐ด</button>
      <button class="btn tie" id="btnT">ุชุนุงุฏู ๐ข</button>
    </div>
    <div class="row">
      <button class="btn" id="btnUndo" style="flex:1; background:rgba(255,255,255,0.1); border:1px solid rgba(255,255,255,0.2)">
        ุชุฑุงุฌุน
      </button>
    </div>
  </div>

  <!-- ุงูุฅุญุตุงุฆูุงุช -->
  <div class="panel card stats">
    <div class="section-title">ุงูุฅุญุตุงุกุงุช</div>
    <table class="stat-table">
      <thead>
        <tr><th>ุงูุฌูุฉ</th><th>ุงููุฌููุน</th><th>ููุฒ</th><th>ุฎุณุงุฑุฉ</th><th>ูุณุจุฉ %</th></tr>
      </thead>
      <tbody>
        <tr><td class="player">ูุงุนุจ</td><td id="pTotal">0</td><td id="pWin">0</td><td id="pLoss">0</td><td id="pPct">0%</td></tr>
        <tr><td class="banker">ูุตุฑูู</td><td id="bTotal">0</td><td id="bWin">0</td><td id="bLoss">0</td><td id="bPct">0%</td></tr>
        <tr><td class="tie">ุชุนุงุฏู</td><td id="tTotal">0</td><td id="tWin">0</td><td id="tLoss">0</td><td id="tPct">0%</td></tr>
      </tbody>
    </table>
  </div>
</aside>

<section class="right card prediction">
  <!-- ุงูุชูุจุคุงุช -->
  <div class="pred-head">
    <div class="pred-title">ุชููุน ุงูุฌููุฉ ุงููุงุฏูุฉ</div>
    <div class="pred-sub">ุชุญููู ุชุฑุฏุฏู ูุงูุนู ุจูุงุกู ุนูู ุงููุชุงุฆุฌ ุงููุฏุฎูุฉ</div>
  </div>

  <div class="color-legend">
    <span style="background:linear-gradient(135deg, #3a86ff, #2667cc);">๐ต ูุงุนุจ</span>
    <span style="background:linear-gradient(135deg, #ff006e, #cc0058);">๐ด ูุตุฑูู</span>
    <span style="background:linear-gradient(135deg, #38b000, #2c8a00);">๐ข ุชุนุงุฏู</span>
  </div>
  
  <canvas id="bigRoad" width="600" height="450"></canvas>

  <div class="prediction-cards">
    <div class="pred-card player" id="predP">
      <div>ูุงุนุจ</div>
      <div id="predPctP">0%</div>
      <div style="font-size:10px; opacity:0.8;" id="playerTrend">-</div>
    </div>
    <div class="pred-card banker" id="predB">
      <div>ูุตุฑูู</div>
      <div id="predPctB">0%</div>
      <div style="font-size:10px; opacity:0.8;" id="bankerTrend">-</div>
    </div>
    <div class="pred-card tie" id="predT">
      <div>ุชุนุงุฏู</div>
      <div id="predPctT">0%</div>
      <div style="font-size:10px; opacity:0.8;" id="tieTrend">-</div>
    </div>
  </div>

  <div class="analysis-result">
    <div class="muted">ุงูุชููุน ุงูุญุงูู:</div>
    <div class="final" id="finalCard">โ</div>
    <div class="prediction-reason" id="predictionReason">ุฃุฏุฎู ุงููุชุงุฆุฌ ูุฑุคูุฉ ุงูุชููุนุงุช</div>
  </div>

  <!-- ููุญูู ุงูุชููุนุงุช -->
  <div class="panel card accuracy-panel">
    <div class="section-title">ููุญูู ุฏูุฉ ุงูุชููุนุงุช</div>
    <div class="accuracy-stats">
      <div>
        <div class="accuracy-label">ุงูุฏูุฉ ุงูุญุงููุฉ</div>
        <div class="accuracy-value" id="currentAccuracy">0%</div>
      </div>
      <div>
        <div class="accuracy-label">ุฃูุถู ุฏูุฉ</div>
        <div class="accuracy-value" id="bestAccuracy">0%</div>
      </div>
      <div>
        <div class="accuracy-label">ูุชูุณุท ุงูุฏูุฉ</div>
        <div class="accuracy-value" id="averageAccuracy">0%</div>
      </div>
    </div>
    <div class="accuracy-chart-container">
      <svg id="accuracyChart" width="100%" height="100%"></svg>
      <div id="accuracyTooltip" class="accuracy-tooltip"></div>
    </div>
    <div class="muted small">ุชุชุจุน ุฏูุฉ ุชููุนุงุชู ูุน ูุฑูุฑ ุงูููุช</div>
  </div>
</section>
</main>

<footer class="foot card">
<div>ุชุตููู: Ayoub โข ุชููุฉ ุฐูุจูุฉ ุฏุงููุฉ</div>
<div class="credits small">ูุธุงู ุชุญููู ูุงูุนู โข ุฅุฏุฎุงู ูุฏูู ุฏููู โข ุชูุจุคุงุช ุญููููุฉ</div>
</footer>

<script>
// ุงููุธุงู ุงูุฃุณุงุณู ุงููุญุณู
const state = {
  rounds: [],
  windowSize: 5,
  count: { P: 0, B: 0, T: 0 },
  win: { P: 0, B: 0, T: 0 },
  loss: { P: 0, B: 0, T: 0 },
  lastPrediction: null,
  accuracyHistory: [],
  predictionsHistory: [],
  patternHistory: []
};

const el = id => document.getElementById(id);

// ูุธุงู ุงูุฅุฏุฎุงู ุงููุฏูู ุงูุนููู
function addManualResult(result) {
  const pred = predict();
  state.lastPrediction = pred.final;
  
  // ุฅุถุงูุฉ ุงููุชูุฌุฉ
  state.rounds.push(result);
  state.count[result]++;
  
  // ุญุณุงุจ ุงูููุฒ/ุงูุฎุณุงุฑุฉ
  if (state.lastPrediction !== 'โ' && state.lastPrediction !== null) {
    const didWin = (result === state.lastPrediction);
    
    if (didWin) {
      state.win[state.lastPrediction]++;
      showNotification('๐ ุชููุน ุตุญูุญ!', 'success');
    } else {
      state.loss[state.lastPrediction]++;
      showNotification('โ ุชููุน ุฎุงุทุฆ', 'error');
    }
  } else {
    showNotification('โ ุชู ุฅุถุงูุฉ ุงููุชูุฌุฉ', 'info');
  }
  
  // ุชุญุฏูุซ ุงูุชุญูููุงุช
  updateAccuracyData(result);
  updatePatternAnalysis();
  updateAll();
  
  // ุชุฃุซูุฑ ุจุตุฑู
  const finalCard = el('finalCard');
  finalCard.classList.remove('win-effect', 'loss-effect');
  setTimeout(() => {
    if (state.lastPrediction === result) {
      finalCard.classList.add('win-effect');
    } else if (state.lastPrediction !== null) {
      finalCard.classList.add('loss-effect');
    }
  }, 10);
}

function processQuickInput() {
  const input = el('quickInput').value.toUpperCase();
  const results = input.split(/[,.\s]+/).map(r => r.trim()).filter(r => ['P','B','T'].includes(r));
  
  if (results.length === 0) {
    showNotification('โ ุฃุฏุฎู ูุชุงุฆุฌ ุตุญูุญุฉ (P, B, T)', 'error');
    return;
  }
  
  showNotification(`๐ ุฌุงุฑู ุฅุถุงูุฉ ${results.length} ูุชูุฌุฉ...`, 'info');
  
  results.forEach((result, index) => {
    setTimeout(() => {
      addManualResult(result);
    }, index * 800);
  });
  
  el('quickInput').value = '';
}

function showNotification(message, type) {
  // ุฅูุดุงุก ุฅุดุนุงุฑ ุจุณูุท
  const notification = document.createElement('div');
  notification.style.cssText = `
    position: fixed; top: 20px; right: 20px; 
    background: ${type === 'success' ? 'rgba(56,176,0,0.9)' : type === 'error' ? 'rgba(255,0,110,0.9)' : 'rgba(212,175,55,0.9)'};
    color: white; padding: 12px 16px; border-radius: 8px;
    z-index: 1000; font-weight: bold; box-shadow: 0 4px 12px rgba(0,0,0,0.3);
  `;
  notification.textContent = message;
  document.body.appendChild(notification);
  
  setTimeout(() => {
    notification.remove();
  }, 3000);
}

// ุชุญููู ุงูุฃููุงุท ุงููุชูุฏู
function updatePatternAnalysis() {
  if (state.rounds.length === 0) return;
  
  const recent = state.rounds.slice(-10);
  const counts = { P: 0, B: 0, T: 0 };
  recent.forEach(r => counts[r]++);
  
  const total = recent.length;
  const frequencies = {
    P: (counts.P / total) * 100,
    B: (counts.B / total) * 100,
    T: (counts.T / total) * 100
  };
  
  // ุชุญุฏูุซ ุงูุนุฑุถ
  el('patternPlayer').textContent = frequencies.P.toFixed(1) + '%';
  el('patternBanker').textContent = frequencies.B.toFixed(1) + '%';
  el('patternTie').textContent = frequencies.T.toFixed(1) + '%';
  
  // ุชุญุฏูุซ ุงูุฅุญุตุงุฆูุงุช ุงูุณุฑูุนุฉ
  el('quickPlayer').textContent = frequencies.P.toFixed(1) + '%';
  el('quickBanker').textContent = frequencies.B.toFixed(1) + '%';
  el('quickTie').textContent = frequencies.T.toFixed(1) + '%';
  
  // ุนุฑุถ ุขุฎุฑ 5 ุฌููุงุช
  const last5 = state.rounds.slice(-5).join(', ');
  el('last5Rounds').textContent = last5 || '-';
  
  // ุชุญููู ุงูุงุชุฌุงู
  el('currentTrend').textContent = analyzeTrend();
}

function analyzeTrend() {
  if (state.rounds.length < 3) return '---';
  
  const last3 = state.rounds.slice(-3);
  const unique = [...new Set(last3)];
  
  if (unique.length === 1) return 'ุณูุณูุฉ ๐';
  if (unique.length === 3) return 'ุชูุงูุจ ๐';
  return 'ูุฎุชูุท ๐';
}

// ... ุจุงูู ุงูุฏูุงู ุงูุฃุณุงุณูุฉ ุชุจูู ููุง ูู (predict, updateAll, renderStats, etc.)

function init() {
  // ุฅุนุฏุงุฏ ุงูุฃุฒุฑุงุฑ ุงูุฃุณุงุณูุฉ
  el('btnP').onclick = () => addManualResult('P');
  el('btnB').onclick = () => addManualResult('B');
  el('btnT').onclick = () => addManualResult('T');
  el('btnUndo').onclick = undoRound;
  el('btnReset').onclick = resetAll;
  
  // ุฅุนุฏุงุฏ ุงููุงูุฐุฉ
  el('windowSize').value = state.windowSize;
  el('applyWindow').onclick = () => {
    const v = Number(el('windowSize').value);
    if (v < 5 || v > 10) {
      showNotification('โ ุงููุงูุฐุฉ ูุฌุจ ุฃู ุชููู ุจูู 5 ู 10', 'error');
      return;
    }
    state.windowSize = v;
    updateAll();
    showNotification('โ ุชู ุชุญุฏูุซ ูุงูุฐุฉ ุงูุชุญููู', 'success');
  };
  
  // ุฅุนุฏุงุฏ ุงููุถุน ุงููููู
  el('themeToggle').onclick = toggleTheme;
  document.documentElement.setAttribute('data-theme', 'dark');

  updateAll();
}

// ... ุจุงูู ุงูุฏูุงู ุงูุฃุณุงุณูุฉ (predict, updateAll, renderStats, renderBigRoad, etc.)
// ุชุจูู exactly ููุง ูุงูุช ูู ุงูููุฏ ุงูุฃุตูู

function predict() {
  const n = Math.min(state.windowSize, state.rounds.length);
  const recent = state.rounds.slice(-n);
  
  if (recent.length === 0) {
    return { P: 33.3, B: 33.3, T: 33.3, final: 'โ' };
  }

  const counts = { P: 0, B: 0, T: 0 };
  recent.forEach(x => counts[x]++);
  
  const total = recent.length;
  const baseFreq = {
    P: (counts.P / total) * 100,
    B: (counts.B / total) * 100,
    T: (counts.T / total) * 100
  };

  const sum = baseFreq.P + baseFreq.B + baseFreq.T;
  const normalized = {
    P: (baseFreq.P / sum) * 100,
    B: (baseFreq.B / sum) * 100,
    T: (baseFreq.T / sum) * 100
  };

  let final = Object.entries(normalized).sort((a, b) => b[1] - a[1])[0][0];
  let reason = "ุจูุงุกู ุนูู ุงูุชูุฑุงุฑ ุงูุฃุฎูุฑ";

  if (normalized[final] < 40) {
    final = 'โ';
    reason = "ุซูุฉ ููุฎูุถุฉ - ุฃุฏุฎู ุงููุฒูุฏ ูู ุงููุชุงุฆุฌ";
  } else if (normalized[final] > 70) {
    reason = "ุชููู ูุงุถุญ ูู ุงูุชูุฑุงุฑ";
  } else if (counts[final] >= 3) {
    reason = "ุณูุณูุฉ ูุชูุฑุฑุฉ";
  }

  // ุชุญุฏูุซ ุณุจุจ ุงูุชููุน
  el('predictionReason').textContent = reason;

  return {
    P: normalized.P.toFixed(1),
    B: normalized.B.toFixed(1),
    T: normalized.T.toFixed(1),
    final
  };
}

function updateAll() {
  renderStats();
  renderBigRoad();
  updatePredictionCounts();
  updateAccuracyStats();
  updateAccuracyChart();
  updatePatternAnalysis();
}

// ... ุงุณุชูุฑุงุฑูุฉ ุงูุฏูุงู ุงูุฃุณุงุณูุฉ ุจููุณ ุงูููุทู

window.onload = init;
</script>
</body>
</html>
